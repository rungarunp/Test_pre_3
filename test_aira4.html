<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>à¸‚à¹‰à¸­à¸ªà¸­à¸šà¹‚à¸¢à¸‡à¹€à¸ªà¹‰à¸™ à¸­à¸™à¸¸à¸šà¸²à¸¥ 3</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#fef9c3;
  text-align:center;
}

h2{ color:#d97706; }

.container{
  display:flex;
  justify-content:space-between;
  max-width:950px;
  margin:auto;
  position:relative;
}

.column{ width:40%; }

.item{
  background:white;
  padding:12px;
  margin:18px;
  border-radius:12px;
  box-shadow:0 4px 6px rgba(0,0,0,0.1);
  cursor:pointer;
  font-size:18px;
  font-weight:bold;
}

.item:hover{ background:#fde68a; }

svg{
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:100%;
  pointer-events:none;
}

button, select{
  margin:10px;
  padding:10px 15px;
  border-radius:8px;
  border:none;
  font-size:16px;
  cursor:pointer;
}

button{
  background:#f59e0b;
  color:white;
}

select{
  background:#fbbf24;
}
.fade-out {
  opacity: 0;
  transition: opacity 0.25s ease;
}

.fade-in {
  opacity: 1;
  transition: opacity 0.25s ease;
}
</style>
</head>
<body>

<h2>ðŸŽ“ à¸‚à¹‰à¸­à¸ªà¸­à¸šà¹‚à¸¢à¸‡à¹€à¸ªà¹‰à¸™ à¸­à¸™à¸¸à¸šà¸²à¸¥ 3</h2>

<select id="categorySelect"></select>
<button onclick="generateGame()">ðŸ”„ à¸ªà¸¸à¹ˆà¸¡à¸‚à¹‰à¸­à¸ªà¸­à¸š</button>
<button onclick="clearLines()">ðŸ§¹ à¸¥à¹‰à¸²à¸‡à¹€à¸ªà¹‰à¸™</button>

<div class="container" id="gameArea">
  <div class="column" id="leftCol"></div>
  <div class="column" id="rightCol"></div>
  <svg id="svgLines"></svg>
</div>

<script>
const categories = {

"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ - à¸žà¸¢à¸±à¸à¸Šà¸™à¸°":[
{q:"à¸",a:"à¹„à¸à¹ˆ"},
{q:"à¸‚",a:"à¹„à¸‚à¹ˆ"},
{q:"à¸ˆ",a:"à¸ˆà¸²à¸™"},
{q:"à¸”",a:"à¹€à¸”à¹‡à¸"},
{q:"à¸š",a:"à¹ƒà¸šà¹„à¸¡à¹‰"}
],

"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ - à¸•à¸±à¸§à¹€à¸¥à¸‚à¹„à¸—à¸¢":[
{q:"à¹‘",a:"1"},
{q:"à¹’",a:"2"},
{q:"à¹“",a:"3"},
{q:"à¹”",a:"4"},
{q:"à¹•",a:"5"}
],

"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ - à¸¡à¸²à¸•à¸£à¸² à¸ à¸à¸²":[
{q:"à¸¡à¸²",a:"à¹„à¸¡à¹ˆà¸¡à¸µà¸•à¸±à¸§à¸ªà¸°à¸à¸”"},
{q:"à¸”à¸¹",a:"à¹„à¸¡à¹ˆà¸¡à¸µà¸•à¸±à¸§à¸ªà¸°à¸à¸”"},
{q:"à¸•à¸²",a:"à¹„à¸¡à¹ˆà¸¡à¸µà¸•à¸±à¸§à¸ªà¸°à¸à¸”"},
{q:"à¸›à¸¥à¸²",a:"à¹„à¸¡à¹ˆà¸¡à¸µà¸•à¸±à¸§à¸ªà¸°à¸à¸”"}
],

"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ - à¸¡à¸²à¸•à¸£à¸² à¸à¸‡":[
{q:"à¸à¸‡",a:"à¸‡"},
{q:"à¸Šà¸‡",a:"à¸‡"},
{q:"à¸›à¸´à¸‡à¸›à¸­à¸‡",a:"à¸‡"},
{q:"à¸¥à¸‡",a:"à¸‡"}
],

"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ - à¸¡à¸²à¸•à¸£à¸² à¸à¸™":[
{q:"à¸šà¹‰à¸²à¸™",a:"à¸™"},
{q:"à¸à¸´à¸™",a:"à¸™"},
{q:"à¸à¸™",a:"à¸™"},
{q:"à¹€à¸”à¸´à¸™",a:"à¸™"}
],

"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ - à¸¡à¸²à¸•à¸£à¸² à¸à¸¡":[
{q:"à¸¥à¸¡",a:"à¸¡"},
{q:"à¸à¸¥à¸¡",a:"à¸¡"},
{q:"à¸‚à¸™à¸¡",a:"à¸¡"},
{q:"à¸¢à¸´à¹‰à¸¡",a:"à¸¡"}
],

"à¸„à¸“à¸´à¸• - à¸™à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™":[
{q:"ðŸŽðŸŽðŸŽ",a:"3"},
{q:"ðŸ¶ðŸ¶",a:"2"},
{q:"â­ï¸â­ï¸â­ï¸â­ï¸",a:"4"},
{q:"âš½ï¸",a:"1"}
],

"à¸„à¸“à¸´à¸• - à¸šà¸§à¸à¹€à¸¥à¸‚":[
{q:"2 + 3",a:"5"},
{q:"4 + 5",a:"9"},
{q:"6 + 2",a:"8"},
{q:"7 + 1",a:"8"}
],

"à¸„à¸“à¸´à¸• - à¸¥à¸šà¹€à¸¥à¸‚":[
{q:"5 - 2",a:"3"},
{q:"9 - 4",a:"5"},
{q:"8 - 3",a:"5"},
{q:"7 - 6",a:"1"}
],

"English - A-Z":[
{q:"A",a:"Apple"},
{q:"B",a:"Ball"},
{q:"C",a:"Cat"},
{q:"D",a:"Dog"}
],

"English - Colors":[
{q:"Red",a:"à¸ªà¸µà¹à¸”à¸‡"},
{q:"Blue",a:"à¸ªà¸µà¸™à¹‰à¸³à¹€à¸‡à¸´à¸™"},
{q:"Green",a:"à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§"},
{q:"Yellow",a:"à¸ªà¸µà¹€à¸«à¸¥à¸·à¸­à¸‡"}
],

"English - Animals":[
{q:"Dog",a:"à¸ªà¸¸à¸™à¸±à¸‚"},
{q:"Cat",a:"à¹à¸¡à¸§"},
{q:"Bird",a:"à¸™à¸"},
{q:"Fish",a:"à¸›à¸¥à¸²"}
],

"English - Fruits":[
{q:"Apple",a:"à¹à¸­à¸›à¹€à¸›à¸´à¸¥"},
{q:"Banana",a:"à¸à¸¥à¹‰à¸§à¸¢"},
{q:"Orange",a:"à¸ªà¹‰à¸¡"},
{q:"Mango",a:"à¸¡à¸°à¸¡à¹ˆà¸§à¸‡"}
],

"English - Numbers 1-10":[
{q:"One",a:"1"},
{q:"Two",a:"2"},
{q:"Three",a:"3"},
{q:"Four",a:"4"}
],

"English - Family":[
{q:"Father",a:"à¸žà¹ˆà¸­"},
{q:"Mother",a:"à¹à¸¡à¹ˆ"},
{q:"Brother",a:"à¸žà¸µà¹ˆà¸Šà¸²à¸¢"},
{q:"Sister",a:"à¸žà¸µà¹ˆà¸ªà¸²à¸§"}
]

};

let svg=document.getElementById("svgLines");
let isDrawing=false;
let currentLine=null;
let startElement = null;


const select=document.getElementById("categorySelect");
select.addEventListener("change", generateGame);
Object.keys(categories).forEach(cat=>{
  let option=document.createElement("option");
  option.value=cat;
  option.textContent=cat;
  select.appendChild(option);
});

function generateGame(){

  const gameArea = document.getElementById("gameArea");
  gameArea.classList.remove("fade-in");
  gameArea.classList.add("fade-out");

  setTimeout(()=>{

    clearLines();

    const left=document.getElementById("leftCol");
    const right=document.getElementById("rightCol");
    left.innerHTML="";
    right.innerHTML="";

    const selected=categories[select.value];

    // à¹ƒà¸ªà¹ˆ id à¹ƒà¸«à¹‰à¹à¸•à¹ˆà¸¥à¸°à¸‚à¹‰à¸­
    const withId = selected.map((item,index)=>({
      id:index,
      q:item.q,
      a:item.a
    }));

    const shuffled=[...withId].sort(()=>Math.random()-0.5);

    withId.forEach(item=>{
      const div=document.createElement("div");
      div.className="item";
      div.innerText=item.q;
      div.dataset.id=item.id;
      div.dataset.side="left";
      addEvents(div);
      left.appendChild(div);
    });

    shuffled.forEach(item=>{
      const div=document.createElement("div");
      div.className="item";
      div.innerText=item.a;
      div.dataset.id=item.id;
      div.dataset.side="right";
      addEvents(div);
      right.appendChild(div);
    });

    gameArea.classList.remove("fade-out");
    gameArea.classList.add("fade-in");

  },250);
}

function addEvents(el){
  el.addEventListener("mousedown",startDraw);
  el.addEventListener("touchstart",startDraw);
}
function startDraw(e){
  e.preventDefault();

  if(e.target.dataset.side !== "left") return;

  startElement = e.target;
  isDrawing = true;

  const rect = startElement.getBoundingClientRect();
  const cRect = document.getElementById("gameArea").getBoundingClientRect();

  const x = rect.left + rect.width/2 - cRect.left;
  const y = rect.top + rect.height/2 - cRect.top;

  currentLine = document.createElementNS("http://www.w3.org/2000/svg","line");
  currentLine.setAttribute("x1",x);
  currentLine.setAttribute("y1",y);
  currentLine.setAttribute("x2",x);
  currentLine.setAttribute("y2",y);
  currentLine.setAttribute("stroke","gray");
  currentLine.setAttribute("stroke-width","4");
  currentLine.style.pointerEvents="auto";

  currentLine.addEventListener("click",()=>{
    svg.removeChild(currentLine);
  });

  svg.appendChild(currentLine);
}

document.addEventListener("mousemove", moveDraw);
document.addEventListener("touchmove", moveDraw, { passive:false });

function moveDraw(e){
  if(!isDrawing || !currentLine) return;

  e.preventDefault();

  const cRect = document.getElementById("gameArea").getBoundingClientRect();

  let clientX = e.touches ? e.touches[0].clientX : e.clientX;
  let clientY = e.touches ? e.touches[0].clientY : e.clientY;

  currentLine.setAttribute("x2", clientX - cRect.left);
  currentLine.setAttribute("y2", clientY - cRect.top);
}
document.addEventListener("mouseup", stopDraw);
document.addEventListener("touchend", stopDraw);

function stopDraw(e){
  if(!isDrawing || !currentLine) return;

  isDrawing = false;

  let clientX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
  let clientY = e.changedTouches ? e.changedTouches[0].clientY : e.clientY;

  const endElement = document.elementFromPoint(clientX, clientY);

  if(
    endElement &&
    endElement.classList.contains("item") &&
    endElement.dataset.side === "right"
  ){
      if(startElement.dataset.id === endElement.dataset.id){
        currentLine.setAttribute("stroke","green");
      }else{
        currentLine.setAttribute("stroke","red");
      }
  }else{
      svg.removeChild(currentLine);
  }

  currentLine = null;
}

function clearLines(){
  while(svg.firstChild) svg.removeChild(svg.firstChild);
}

generateGame();
</script>

</body>
</html>