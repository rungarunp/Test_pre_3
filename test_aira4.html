<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bright Star School</title>

<style>
body{
  font-family: Arial;
  margin:0;
  background:linear-gradient(#f4f8ff,#e0ecff);
}

header{
  background:#0b3d91;
  color:white;
  padding:14px;
  text-align:center;
  font-size:20px;
}

.container{
  padding:15px;
  text-align:center;
}

.menu button{
  background:#1e5fd8;
  color:white;
  border:none;
  padding:8px 14px;
  margin:4px;
  border-radius:18px;
}

.board{
  display:flex;
  justify-content:center;
  margin-top:20px;
  position:relative;
  touch-action:none;
}

.column{
  margin:0 30px;
  z-index:2;
}

.item{
  background:white;
  padding:10px 18px;
  margin:14px;
  border-radius:14px;
  box-shadow:0 3px 6px rgba(0,0,0,0.1);
  font-size:18px;
  user-select:none;
}

canvas{
  position:absolute;
  top:0;
  left:0;
  z-index:1;
  pointer-events:none;
}

.mascot{
  margin-top:20px;
  font-size:50px;
  transition:0.3s;
}
.jump{ transform:scale(1.3) rotate(10deg); }
</style>
</head>

<body>

<header>ğŸ§¸ Bright Star Private School</header>

<div class="container">

<div class="menu">
  <button onclick="changeCategory('classroom')">ğŸ“˜ Classroom</button>
  <button onclick="changeCategory('animals')">ğŸ¶ Animals</button>
</div>

<div class="board" id="board">
  <canvas id="canvas"></canvas>
  <div class="column" id="left"></div>
  <div class="column" id="right"></div>
</div>

<div class="mascot" id="mascot">ğŸ§¸</div>
<br>
<button onclick="checkAnswer()">âœ… Check</button>
<button onclick="resetBoard()">ğŸ”„ Reset</button>

</div>

<script>
const data = {
classroom:[
  {left:"pencil",right:"âœï¸"},
  {left:"book",right:"ğŸ“š"},
  {left:"bag",right:"ğŸ’"},
  {left:"ruler",right:"ğŸ“"}
],
animals:[
  {left:"Dog",right:"ğŸ¶"},
  {left:"Cat",right:"ğŸ±"},
  {left:"Monkey",right:"ğŸµ"},
  {left:"Tiger",right:"ğŸ¯"}
]
};

let currentCategory="classroom";
let pairs=[];
let connections=[];
let dragging=null;

const board=document.getElementById("board");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const leftDiv=document.getElementById("left");
const rightDiv=document.getElementById("right");

function resizeCanvas(){
  canvas.width=board.offsetWidth;
  canvas.height=board.offsetHeight;
}
window.addEventListener("resize",resizeCanvas);

function shuffle(arr){
  return arr.sort(()=>Math.random()-0.5);
}

function changeCategory(cat){
  currentCategory=cat;
  resetBoard();
  loadCategory();
}

function loadCategory(){
  pairs=shuffle([...data[currentCategory]]);
  render();
}

function render(){
  leftDiv.innerHTML="";
  rightDiv.innerHTML="";
  connections=[];
  ctx.clearRect(0,0,canvas.width,canvas.height);

  let leftItems=shuffle(pairs.map(p=>p.left));
  let rightItems=shuffle(pairs.map(p=>p.right));

  leftItems.forEach(text=>{
    let d=document.createElement("div");
    d.className="item";
    d.innerText=text;
    d.dataset.side="left";
    d.dataset.value=text;
    leftDiv.appendChild(d);
  });

  rightItems.forEach(text=>{
    let d=document.createElement("div");
    d.className="item";
    d.innerText=text;
    d.dataset.side="right";
    d.dataset.value=text;
    rightDiv.appendChild(d);
  });
}

function drawLine(x1,y1,x2,y2,color="black"){
  ctx.strokeStyle=color;
  ctx.lineWidth=3;
  ctx.beginPath();
  ctx.moveTo(x1,y1);
  ctx.lineTo(x2,y2);
  ctx.stroke();
}

function getPos(e){
  const rect=board.getBoundingClientRect();
  if(e.touches){
    return {
      x:e.touches[0].clientX-rect.left,
      y:e.touches[0].clientY-rect.top
    };
  }
  return {x:e.clientX-rect.left,y:e.clientY-rect.top};
}

function start(e){
  const target=e.target.closest(".item");
  if(!target) return;

  const rect=target.getBoundingClientRect();
  const boardRect=board.getBoundingClientRect();

  dragging={
    text:target.dataset.value,
    side:target.dataset.side,
    x:rect.left-boardRect.left+rect.width/2,
    y:rect.top-boardRect.top+rect.height/2
  };
}

function move(e){
  if(!dragging) return;
  e.preventDefault();
  const pos=getPos(e);
  ctx.clearRect(0,0,canvas.width,canvas.height);
  redraw();
  drawLine(dragging.x,dragging.y,pos.x,pos.y);
}

function end(e){
  if(!dragging) return;

  const pos=getPos(e);
  const element=document.elementFromPoint(
    pos.x+board.getBoundingClientRect().left,
    pos.y+board.getBoundingClientRect().top
  );

  if(element && element.classList.contains("item")){
    if(element.dataset.side!==dragging.side){

      const rect=element.getBoundingClientRect();
      const boardRect=board.getBoundingClientRect();

      connections.push({
        from:dragging.text,
        to:element.dataset.value,
        x1:dragging.x,
        y1:dragging.y,
        x2:rect.left-boardRect.left+rect.width/2,
        y2:rect.top-boardRect.top+rect.height/2
      });
    }
  }

  dragging=null;
  redraw();
}

function redraw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  connections.forEach(c=>{
    drawLine(c.x1,c.y1,c.x2,c.y2,c.color||"black");
  });
}

function checkAnswer(){
  let correctAll=true;

  connections.forEach(c=>{
    let match=pairs.find(p=>p.left===c.from && p.right===c.to);
    c.color=match?"green":"red";
    if(!match) correctAll=false;
  });

  redraw();

  if(correctAll && connections.length===pairs.length){
    document.getElementById("mascot").innerText="â­";
    speechSynthesis.speak(new SpeechSynthesisUtterance("Good job!"));
  }else{
    document.getElementById("mascot").innerText="ğŸ¤”";
  }
}

function resetBoard(){
  connections=[];
  dragging=null;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  document.getElementById("mascot").innerText="ğŸ§¸";
}

board.addEventListener("touchstart",start);
board.addEventListener("touchmove",move,{passive:false});
board.addEventListener("touchend",end);

board.addEventListener("mousedown",start);
board.addEventListener("mousemove",move);
board.addEventListener("mouseup",end);

window.onload=function(){
  resizeCanvas();
  loadCategory();
};
</script>

</body>
</html>