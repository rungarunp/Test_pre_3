<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÇ‡∏¢‡∏á‡πÄ‡∏™‡πâ‡∏ô SVG ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</title>

<style>
body{
    font-family:Arial;
    background:linear-gradient(to right,#a1c4fd,#c2e9fb);
    text-align:center;
    touch-action:none;
}

.container{
    display:flex;
    justify-content:center;
    gap:150px;
    position:relative;
    margin-top:40px;
}

.column{
    display:flex;
    flex-direction:column;
    gap:20px;
}

.box{
    background:#fff;
    padding:10px 20px;
    border-radius:10px;
    box-shadow:0 3px 8px rgba(0,0,0,0.2);
}

.box-left{
    cursor:pointer;
}

.correct{background:#81c784 !important;}
.wrong{background:#e57373 !important;}

svg{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
}

line{
    stroke:#ff4081;
    stroke-width:3;
    cursor:pointer;
}

button{
    margin-top:20px;
    padding:10px 20px;
    border:none;
    border-radius:10px;
    background:#4fc3f7;
    color:#fff;
    cursor:pointer;
}
</style>
</head>
<body>

<h1>‡πÇ‡∏¢‡∏á‡πÄ‡∏™‡πâ‡∏ô (‡∏•‡∏≤‡∏Å‡∏ô‡∏¥‡πâ‡∏ß‡πÑ‡∏î‡πâ)</h1>
<button onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>

<div class="container" id="gameArea">
    <svg id="svg"></svg>
    <div class="column" id="left"></div>
    <div class="column" id="right"></div>
</div>

<button onclick="checkAnswers()">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
<h2 id="result"></h2>

<script>

const questionBank=[
{q:"‡πÄ‡∏•‡∏Ç‡πÑ‡∏ó‡∏¢ ‡πî",a:"4"},
{q:"üçéüçéüçéüçéüçé",a:"5"},
{q:"10 - 3",a:"7"},
{q:"Dog",a:"üê∂"},
{q:"‡πÅ‡∏°‡πà",a:"mother"},
{q:"A ‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢",a:"B"},
{q:"12 + 5",a:"17"},
{q:"‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤",a:"Blue"}
];

let selected=[];
let connections={};
let currentLine=null;
let startBox=null;

function shuffle(arr){
    return arr.sort(()=>Math.random()-0.5);
}

function startGame(){
    document.getElementById("result").innerHTML="";
    document.getElementById("svg").innerHTML="";
    connections={};

    const left=document.getElementById("left");
    const right=document.getElementById("right");
    left.innerHTML="";
    right.innerHTML="";

    selected=shuffle([...questionBank]).slice(0,6);
    const shuffledAnswers=shuffle([...selected]);

    selected.forEach((item,i)=>{
        const div=document.createElement("div");
        div.className="box box-left";
        div.innerText=item.q;
        div.dataset.answer=item.a;
        div.dataset.index=i;

        div.addEventListener("pointerdown",(e)=>startDraw(e,div));
        left.appendChild(div);
    });

    shuffledAnswers.forEach(item=>{
        const div=document.createElement("div");
        div.className="box";
        div.innerText=item.a;
        div.dataset.value=item.a;
        right.appendChild(div);
    });
}

function startDraw(e,box){
    startBox=box;
    const svg=document.getElementById("svg");

    currentLine=document.createElementNS("http://www.w3.org/2000/svg","line");
    currentLine.setAttribute("stroke","#ff4081");
    currentLine.setAttribute("stroke-width","3");

    svg.appendChild(currentLine);

    document.addEventListener("pointermove",drawLine);
    document.addEventListener("pointerup",endDraw);
}

function drawLine(e){
    if(!currentLine || !startBox) return;

    const rect1=startBox.getBoundingClientRect();
    const container=document.getElementById("gameArea").getBoundingClientRect();

    currentLine.setAttribute("x1",rect1.right-container.left);
    currentLine.setAttribute("y1",rect1.top+rect1.height/2-container.top);
    currentLine.setAttribute("x2",e.clientX-container.left);
    currentLine.setAttribute("y2",e.clientY-container.top);
}

function endDraw(e){
    document.removeEventListener("pointermove",drawLine);
    document.removeEventListener("pointerup",endDraw);

    const target=document.elementFromPoint(e.clientX,e.clientY);

    if(target && target.dataset.value){
        const rect2=target.getBoundingClientRect();
        const container=document.getElementById("gameArea").getBoundingClientRect();

        currentLine.setAttribute("x2",rect2.left-container.left);
        currentLine.setAttribute("y2",rect2.top+rect2.height/2-container.top);

        connections[startBox.dataset.index]=target.dataset.value;

        currentLine.addEventListener("click",()=>{
            currentLine.remove();
            delete connections[startBox.dataset.index];
        });

    }else{
        currentLine.remove();
    }

    currentLine=null;
    startBox=null;
}

function checkAnswers(){
    let score=0;
    const leftBoxes=document.querySelectorAll(".box-left");

    leftBoxes.forEach(box=>{
        const index=box.dataset.index;
        if(connections[index]===box.dataset.answer){
            box.classList.add("correct");
            score++;
        }else{
            box.classList.add("wrong");
        }
    });

    document.getElementById("result").innerHTML=
    "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ: "+score+" / "+selected.length;
}

startGame();

</script>

</body>
</html>